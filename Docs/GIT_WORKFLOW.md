# 開発・運用フロー (Git Workflow)

最終更新: 2026-02-19

## 1. ブランチ構成

本プロジェクトでは、以下の3つの主要ブランチを使用して開発・運用を行います。

| ブランチ名 | 環境 / 役割                | 内容                                                       |
| :--------- | :------------------------- | :--------------------------------------------------------- |
| `release`  | **本番環境 (Production)**  | **デフォルトブランチ**。常にリリース可能な安定したコード。 |
| `staging`  | **検証環境 (Staging)**     | リリース前の最終確認用。全ての開発内容を統合する。         |
| `develop`  | **開発環境 (Development)** | **日々の開発ベース**。新機能や修正はここからスタートする。 |

---

## 2. 標準的な開発フロー

### 2.1 新機能開発・バグ修正

1. `develop` からブランチを作成する: `feature/feature-name` や `fix/bug-name`
2. 開発を行い、コミットする
3. `develop` ブランチに対してプルリクエスト (PR) を作成・マージする

### 2.2 検証 (Staging)

1. `develop` の内容を `staging` ブランチにマージする
2. ステージング環境（Cloudflare Pages のプレビューなど）で動作確認を行う

### 2.3 リリース (Production)

1. `staging` での検証が完了後、`release` ブランチへ PR を作成・マージする
2. `release` ブランチへのマージをトリガーに本番環境へのデプロイが行われる

---

## 3. 緊急修正 (Hotfix)

本番環境で緊急の修正が必要な場合：

1. `release` から直接 `hotfix/xxx` ブランチを作成して修正
2. `release` へマージし、即時デプロイ
3. 修正内容を忘れずに `staging` および `develop` にも反映（バックポート）させる

---

## 4. 注意事項

- **直接コミット禁止**: `release` および `staging` ブランチへの直接コミットは避け、必ず PR を経由してください。
- **追跡設定**: `git pull` がエラーになる場合は、`git branch --set-upstream-to=origin/<branch> <branch>` で追跡情報を再設定してください。
